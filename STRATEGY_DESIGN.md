# 交易策略设计方案

本项目目前支持两种核心交易策略：**闪崩反弹 (Flash Rebound)** 和 **暴涨追涨 (Pump Follow)**。

---

## 1. 闪崩反弹策略 (Flash Rebound)

### **核心逻辑**
利用价格在极短时间内的非理性下跌（闪崩）后的快速回补（反弹）空间获取利润。

### **策略阶段**
1.  **探测买入机会阶段**：
    *   **滑动窗口 (Window)**：默认 10s。
    *   **跌幅阈值 (Drop Threshold)**：默认 0.08 (8%)。
    *   **触发条件**：当前价格相比滑动窗口内的**最高价格**下跌达到阈值。
    *   **锚定价格 (Anchor Price)**：滑动窗口内的最高价格。
    *   **买入价格 (Buy Price)**：触发闪崩阈值时的最新价格。
    *   **锚定 Size (Anchor Size)**：锚定价格出现时的挂单量。
    *   **买入 Size (Buy Size)**：触发买入时的挂单量。

2.  **探测卖出机会阶段**：
    *   **止盈距离 (TP Distance)**：默认 0.05 (5%)。
    *   **止损距离 (SL Distance)**：默认 0.05 (5%)。
    *   **卖出触发**：
        *   **止盈**：当前价格 >= 买入价格 + 止盈距离。
        *   **止损**：当前价格 <= 买入价格 - 止损距离。
    *   **卖出价格 (Sell Price)**：触发卖出时的最新价格。
    *   **卖出 Size (Sell Size)**：触发卖出时的挂单量。

---

## 2. 暴涨追涨策略 (Pump Follow)

### **核心逻辑**
利用价格在极短时间内的快速上涨（暴涨）后的惯性延续空间获取利润。

### **策略阶段**
1.  **探测买入机会阶段**：
    *   **滑动窗口 (Window)**：默认 5s。
    *   **涨幅阈值 (Rise Threshold)**：默认 0.05 (5%)。
    *   **触发条件**：当前价格相比滑动窗口内的**最低价格**上涨达到阈值。
    *   **锚定价格 (Anchor Price)**：滑动窗口内的最低价格。
    *   **买入价格 (Buy Price)**：触发暴涨阈值时的最新价格。
    *   **锚定 Size (Anchor Size)**：锚定价格出现时的挂单量。
    *   **买入 Size (Buy Size)**：触发买入时的挂单量。

2.  **探测卖出机会阶段**：
    *   **止盈距离 (TP Distance)**：默认 0.05 (5%)。
    *   **止损距离 (SL Distance)**：默认 0.05 (5%)。
    *   **卖出触发**：
        *   **止盈**：当前价格 >= 买入价格 + 止盈距离。
        *   **止损**：当前价格 <= 买入价格 - 止损距离。

---

## 3. 通用时间阶段控制 (适用于所有策略)
每个 15 分钟的市场轮次（窗口）被划分为三个阶段：

1.  **正常交易阶段 (T-15m 至 T-3m)**：
    *   正常进行状态 A 和状态 B 的转换。
2.  **停止买入阶段 (T-3m 至 T-1m)**：
    *   停止嗅探闪崩，不再进入新的“状态 B”。
    *   如果已处于“状态 B”，则继续保持并监测卖出机会。
3.  **清仓阶段 (T-1m 至 结束)**：
    *   强制清仓：无论价格如何，所有处于“状态 B”的仓位必须立即卖出并记录。

---

## 数据保存
所有策略执行记录保存在 `rebound.csv` (或指定文件) 中，包含以下字段：
`window_start, asset, direction, anchor_time, anchor_price, anchor_size, buy_time, buy_price, buy_size, sell_time, sell_price, sell_size, status, flash_window, drop_threshold, tp_distance, sl_distance`
